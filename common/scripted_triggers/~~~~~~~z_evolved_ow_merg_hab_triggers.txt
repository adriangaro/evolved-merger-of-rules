# COMPAT VARS
	# ACOT
	@building_dm_ancient_palace = "building_dm_ancient_palace"
	@building_ae_ancient_palace = "building_ae_ancient_palace"
	@building_dm_ancient_hive_cluster = "building_dm_ancient_hive_cluster"
	@building_ae_ancient_hive_cluster = "building_ae_ancient_hive_cluster"
	@building_dm_ancient_control_center = "building_dm_ancient_control_center"
	@building_ae_ancient_control_center = "building_ae_ancient_control_center"
	@building_heaven_sanctuary = "building_heaven_sanctuary"
	@building_ancient_palace = "building_ancient_palace"
	@building_phanon_tower = "building_phanon_tower"
	@building_ancient_control_center = "building_ancient_control_center"
	# AOT
	@building_stellarite_palace = "building_stellarite_palace"
	@building_stellarite_control_center = "building_stellarite_control_center"
	@building_stellarite_hive_cluster = "building_stellarite_hive_cluster"
	@building_phanon_palace = "building_phanon_palace"
	@building_phanon_hive_cluster = "building_phanon_hive_cluster"
	@building_phanon_control_center = "building_phanon_control_center"
	@building_stellarite_control_center = "building_stellarite_control_center"
	@building_stellarite_hive_cluster = "building_stellarite_hive_cluster"
	# Azur Lane Stellaris DlC
	@azur_building_mind_capital = "azur_building_mind_capital"
	@azur_building_mind_net_capital = "azur_building_mind_net_capital"
	# Nirvana Empire Project
	@building_nirvana_empire_palace = "building_nirvana_empire_palace"
	# Star Wars: Kuat Ancient Empire
	@building_kuat_command_center = "building_kuat_command_center"
	# Twinks Atlantean
	@building_ancient_palace_at = "building_ancient_palace_at"
	# Twinks Kaldorei
	@building_nightelf_palace = "building_nightelf_palace"
	# Special Colonies Overhaul
	@building_SCO_resort_system_capital = "building_SCO_resort_system_capital"
	@building_SCO_slave_system_capital = "building_SCO_slave_system_capital"
	# galacot
	@building_dm_galactic_capital = "building_dm_galactic_capital"
	@building_ae_galactic_capital = "building_ae_galactic_capital"
	@building_stellarite_galactic_capital = "building_stellarite_galactic_capital"
	@building_dm_galactic_hive_capital = "building_dm_galactic_hive_capital"
	@building_ae_galactic_hive_capital = "building_ae_galactic_hive_capital"
	@building_stellarite_galactic_hive_capital = "building_stellarite_galactic_hive_capital"
	@building_dm_galactic_machine_capital = "building_dm_galactic_machine_capital"
	@building_ae_galactic_machine_capital = "building_ae_galactic_machine_capital"
	@building_stellarite_galactic_machine_capital = "building_stellarite_galactic_machine_capital"
	@building_stellarite_galactic_hive_capital = "building_stellarite_galactic_hive_capital"
	# All That Is GRIMDARK
	@building_system_capital_gr = "building_system_capital_gr"
	@building_hive_major_capital_sick = "building_hive_major_capital_sick"	
# /

# My vars
# Stellaris evolved exo
	@building_tec_exo_capital = "building_tec_exo_capital"
	@building_tec_exo_major_capital  = "building_tec_exo_major_capital "
	@building_tec_exo_system_capital = "building_tec_exo_system_capital"
	@building_tec_exo_galactic_capital = "building_tec_exo_galactic_capital"
	@building_tec_exo_imperial_capital = "building_tec_exo_imperial_capital"
	# Stelaris evolved biocapital
	@building_tec_bio_capital = "building_tec_bio_capital"
	@building_tec_bio_major_capital  = "building_tec_bio_major_capital "
	@building_tec_bio_system_capital = "building_tec_bio_system_capital"
	@building_tec_bio_galactic_capital = "building_tec_bio_galactic_capital"
	@building_tec_bio_imperial_capital = "building_tec_bio_imperial_capital"
	# Stelaris evolved Kohn
	@building_tec_kohn_capital = "building_tec_kohn_capital"
	@building_tec_kohn_major_capital  = "building_tec_kohn_major_capital "
	@building_tec_kohn_system_capital = "building_tec_kohn_system_capital"
	@building_tec_kohn_galactic_capital = "building_tec_kohn_galactic_capital"
	@building_tec_kohn_imperial_capital = "building_tec_kohn_imperial_capital"

	# Machine fe
	@building_tec_machine_fe_capital = "building_tec_machine_fe_capital"
	@building_tec_machine_fe_major_capital = "building_tec_machine_fe_major_capital"
	# Production capitals
	@building_tec_machine_production_capital = "building_tec_machine_production_capital"
	@building_tec_machine_production_major_capital  = "building_tec_machine_production_major_capital "
	@building_tec_machine_production_system_capital  = "building_tec_machine_production_system_capital "
	@building_tec_machine_production_galactic_capital = "building_tec_machine_production_galactic_capital"
	@building_tec_machine_extraction_capital = "building_tec_machine_extraction_capital"
	@building_tec_machine_extraction_major_capital  = "building_tec_machine_extraction_major_capital "
	@building_tec_machine_extraction_system_capital  = "building_tec_machine_extraction_system_capital "
	@building_tec_machine_extraction_galactic_capital = "building_tec_machine_extraction_galactic_capital"

	@building_tec_hive_fe_capital = "building_tec_hive_fe_capital"
	@building_tec_hive_fe_major_capital = "building_tec_hive_fe_major_capital"
	@building_tec_cyberhive_fe_capital = "building_tec_cyberhive_fe_capital"
	@building_tec_cyberhive_fe_major_capital = "building_tec_cyberhive_fe_major_capital"
	@building_tec_biohive_fe_capital = "building_tec_biohive_fe_capital"
	@building_tec_biohive_fe_major_capital = "building_tec_biohive_fe_major_capital"
# /

# Vanilla scripted triggers
has_upgraded_capital = {
	if = {
		limit = {
			has_modifier = resort_colony
		}
		custom_tooltip = {
			fail_text = "requires_building_resort_capital"
			OR = {
				has_building = building_resort_capital
				has_building = building_resort_major_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# Special Colonies Overhaul
					has_building = @building_SCO_resort_system_capital
				# /
			}
		}
	}
	else_if = {
		limit = {
			has_modifier = slave_colony
		}
		custom_tooltip = {
			fail_text = "requires_building_slave_capital"
			OR = {
				has_building = building_slave_capital
				has_building = building_slave_major_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# Special Colonies Overhaul
					has_building = @building_SCO_slave_system_capital
				# /
			}
		}
	}
	else_if = {
		limit = {
			# Stellaris Evolved triggers
			if = {
				limit = {
					has_stellaris_evolved = yes
				}
				tec_is_habitat = yes
				tec_uses_regular_capital_override = no
			}
			# Others
			else = {
				OR = {
					is_planet_class = pc_habitat
					# Workaround for special habitats
					uses_district_set = habitat
					uses_district_set = pdplanethab
				}
			}
			# ^ Note: This doesn't count worlds with district sets like pdarchive giga_habitat, which uses regular capitals
		}
		custom_tooltip = {
			fail_text = "requires_building_hab_capital"
			OR = {
				has_building = building_hab_capital
				has_building = building_hab_major_capital
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				# Scifi				
				has_building = building_tec_scifi_imperial_capital
				# Machine
				has_building = building_tec_hab_machine_capital
				has_building = building_tec_hab_machine_major_capital
				has_building = building_tec_hab_machine_system_capital
				has_building = building_tec_old_machine_imperial_capital
				# Hive
				has_building = building_tec_hab_hive_capital
				has_building = building_tec_hab_hive_major_capital
				has_building = building_tec_hab_hive_system_capital
				has_building = building_imperial_hive_capital
				# Biohive
				has_building = building_tec_hab_biohive_capital
				has_building = building_tec_hab_biohive_major_capital
				has_building = building_tec_hab_biohive_system_capital
				has_building = building_tec_biohive_imperial_capital
				# Cyberhive
				has_building = building_tec_hab_cyberhive_capital
				has_building = building_tec_hab_cyberhive_major_capital
				has_building = building_tec_hab_cyberhive_system_capital
				has_building = building_tec_cyberhive_imperial_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_dm_ancient_hive_cluster
					has_building = @building_ae_ancient_hive_cluster
					has_building = @building_dm_ancient_control_center 
					has_building = @building_ae_ancient_control_center				
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					has_building = @building_phanon_hive_cluster
					has_building = @building_phanon_control_center
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
				# / 
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_hive_capital"
			OR = {
				has_building = building_hive_capital
				has_building = building_hive_major_capital
				has_building = building_hive_system_capital
				has_building = building_hive_galactic_capital
				# Imperial hive regular
				has_building = building_imperial_hive_capital
				# Stellaris evolved cyber
				has_building = building_tec_cyberhive_capital
				has_building = building_tec_cyberhive_major_capital
				has_building = building_tec_cyberhive_system_capital
				has_building = building_tec_cyberhive_galactic_capital
				# Imperial Cyberhive
				has_building = building_tec_cyberhive_imperial_capital
				# Stellaris evolved bio
				has_building = building_tec_biohive_capital
				has_building = building_tec_biohive_major_capital
				has_building = building_tec_biohive_system_capital
				has_building = building_tec_biohive_galactic_capital
				# Imperial Biohive
				has_building = building_tec_biohive_imperial_capital
				# Hive fe
				has_building = @building_tec_hive_fe_capital
				has_building = @building_tec_hive_fe_major_capital
				has_building = @building_tec_cyberhive_fe_capital
				has_building = @building_tec_cyberhive_fe_major_capital
				has_building = @building_tec_biohive_fe_capital
				has_building = @building_tec_biohive_fe_major_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_hive_cluster
					has_building = @building_ae_ancient_hive_cluster
					has_building = @building_heaven_sanctuary
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_hive_cluster
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# galacot
					has_building = @building_dm_galactic_hive_capital
					has_building = @building_ae_galactic_hive_capital
					has_building = @building_stellarite_galactic_hive_capital
					# All That Is GRIMDARK
					has_building = @building_hive_major_capital_sick
				# /
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_machine_capital"
			OR = {
				has_building = building_machine_capital
				has_building = building_machine_major_capital 
				has_building = building_machine_system_capital 
				has_building = building_machine_galactic_capital
				# Imperial regular
				has_building = building_imperial_machine_capital
				# Stellaris evolved ancient
				has_building = building_tec_old_machine_capital
				has_building = building_tec_old_machine_major_capital 
				has_building = building_tec_old_machine_system_capital 
				has_building = building_tec_old_machine_mega_capital
				# Imperial Old Machine
				has_building = building_tec_old_machine_imperial_capital
				# Machine fe
				has_building = @building_tec_machine_fe_capital
				has_building = @building_tec_machine_fe_major_capital

				# Production capitals
				has_building = @building_tec_machine_production_capital
				has_building = @building_tec_machine_production_major_capital 
				has_building = @building_tec_machine_production_system_capital 
				has_building = @building_tec_machine_production_galactic_capital

				has_building = @building_tec_machine_extraction_capital
				has_building = @building_tec_machine_extraction_major_capital 
				has_building = @building_tec_machine_extraction_system_capital 
				has_building = @building_tec_machine_extraction_galactic_capital

				# External
					# ACOT
					has_building = @building_dm_ancient_control_center
					has_building = @building_ae_ancient_control_center
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_control_center
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_control_center
					has_building = @building_phanon_control_center
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# galacot
					has_building = @building_dm_galactic_machine_capital
					has_building = @building_ae_galactic_machine_capital
					has_building = @building_stellarite_galactic_machine_capital
				# / 
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_capital"
			OR = {
				has_building = building_capital
				has_building = building_major_capital 
				has_building = building_system_capital
				has_building = building_galactic_capital
				has_building = building_imperial_capital
				# Stelaris evolved scifi
				has_building = building_tec_scifi_capital
				has_building = building_tec_scifi_major_capital 
				has_building = building_tec_scifi_system_capital
				has_building = building_tec_scifi_galactic_capital
				has_building = building_tec_scifi_imperial_capital
				# Stellaris evolved exo
				has_building = @building_tec_exo_capital
				has_building = @building_tec_exo_major_capital 
				has_building = @building_tec_exo_system_capital
				has_building = @building_tec_exo_galactic_capital
				has_building = @building_tec_exo_imperial_capital
				# Stelaris evolved biocapital
				has_building = @building_tec_bio_capital
				has_building = @building_tec_bio_major_capital 
				has_building = @building_tec_bio_system_capital
				has_building = @building_tec_bio_galactic_capital
				has_building = @building_tec_bio_imperial_capital
				# Stelaris evolved Kohn
				has_building = @building_tec_kohn_capital
				has_building = @building_tec_kohn_major_capital 
				has_building = @building_tec_kohn_system_capital
				has_building = @building_tec_kohn_galactic_capital
				has_building = @building_tec_kohn_imperial_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_phanon_palace
					# Azur Lane Stellaris DlC
					has_building = @azur_building_mind_capital
					has_building = @azur_building_mind_net_capital
					# Nirvana Empire Project
					has_building = @building_nirvana_empire_palace
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# galacot
					has_building = @building_dm_galactic_capital
					has_building = @building_ae_galactic_capital
					has_building = @building_stellarite_galactic_capital
					has_building = @building_dm_galactic_hive_capital
					has_building = @building_ae_galactic_hive_capital
					has_building = @building_stellarite_galactic_hive_capital
					has_building = @building_dm_galactic_machine_capital
					has_building = @building_ae_galactic_machine_capital
					has_building = @building_stellarite_galactic_machine_capital
					# All That Is GRIMDARK
					has_building = @building_system_capital_gr
				# /
			}
		}
	}
}

has_major_upgraded_capital = {
	if = {
		limit = {
			has_modifier = resort_colony
		}
		custom_tooltip = {
			fail_text = "requires_building_resort_major_capital"
			OR = {
				has_building = building_resort_major_capital
				# External
				# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					has_building = @building_phanon_control_center
					has_building = @building_phanon_hive_cluster
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# Special Colonies Overhaul
					has_building = @building_SCO_resort_system_capital
				# /
			}
		}
	}
	else_if = {
		limit = {
			has_modifier = slave_colony
		}
		custom_tooltip = {
			fail_text = "requires_building_slave_major_capital"
			OR = {
				has_building = building_slave_major_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# Special Colonies Overhaul
					has_building = @building_SCO_slave_system_capital
				# /
			}
		}
	}
	else_if = {
		limit = {
			# Stellaris Evolved triggers
			if = {
				limit = {
					has_stellaris_evolved = yes
				}
				tec_is_habitat = yes
				tec_uses_regular_capital_override = no
			}
			# Others
			else = {
				OR = {
					is_planet_class = pc_habitat
					# Workaround for special habitats
					uses_district_set = habitat
					uses_district_set = pdplanethab
				}
			}
			# ^ Note: This doesn't count worlds with district sets like pdarchive giga_habitat, which uses regular capitals
		}
		custom_tooltip = {
			fail_text = "requires_building_hab_major_capital"
			OR = {
				# Regular
				has_building = building_hab_major_capital
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				# Scifi
				has_building = building_tec_scifi_imperial_capital
				# Machine
				has_building = building_tec_hab_machine_major_capital
				has_building = building_tec_hab_machine_system_capital
				has_building = building_imperial_machine_capital
				has_building = building_tec_old_machine_imperial_capital
				# Hive
				has_building = building_tec_hab_hive_major_capital
				has_building = building_tec_hab_hive_system_capital
				has_building = building_imperial_hive_capital
				# Biohive
				has_building = building_tec_hab_biohive_major_capital
				has_building = building_tec_hab_biohive_system_capital
				has_building = building_tec_biohive_imperial_capital
				# Cyberhive
				has_building = building_tec_hab_cyberhive_major_capital
				has_building = building_tec_hab_cyberhive_system_capital
				has_building = building_tec_cyberhive_imperial_capital

				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_dm_ancient_hive_cluster
					has_building = @building_ae_ancient_hive_cluster
					has_building = @building_dm_ancient_control_center 
					has_building = @building_ae_ancient_control_center				
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
				# /
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_major_hive_capital"
			OR = {
				has_building = building_hive_major_capital
				has_building = building_hive_system_capital
				has_building = building_hive_galactic_capital
				# Imperial Reguhive
				has_building = building_imperial_hive_capital

				# Stellaris evolved cyber
				has_building = building_tec_cyberhive_major_capital
				has_building = building_tec_cyberhive_system_capital
				has_building = building_tec_cyberhive_galactic_capital
				# Imperial Cyberhive
				has_building = building_tec_cyberhive_imperial_capital

				# Stellaris evolved bio
				has_building = building_tec_biohive_major_capital
				has_building = building_tec_biohive_system_capital
				has_building = building_tec_biohive_galactic_capital
				has_building = building_tec_biohive_imperial_capital
				# Hive fe
				has_building = @building_tec_hive_fe_capital
				has_building = @building_tec_hive_fe_major_capital
				has_building = @building_tec_cyberhive_fe_capital
				has_building = @building_tec_cyberhive_fe_major_capital
				has_building = @building_tec_biohive_fe_capital
				has_building = @building_tec_biohive_fe_major_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_hive_cluster
					has_building = @building_ae_ancient_hive_cluster
					has_building = @building_heaven_sanctuary
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_hive_cluster
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# galacot
					has_building = @building_dm_galactic_hive_capital
					has_building = @building_ae_galactic_hive_capital
					has_building = @building_stellarite_galactic_hive_capital
					# All that is GRIMDARK
					has_building = @building_hive_major_capital_sick
				# /
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_machine_major_capital"
			OR = {
				has_building = building_machine_major_capital 
				has_building = building_machine_system_capital 
				has_building = building_machine_galactic_capital 
				# Imperial Machine
				has_building = building_imperial_machine_capital

				# Stellaris evolved old
				has_building = building_tec_old_machine_major_capital 
				has_building = building_tec_old_machine_system_capital 
				has_building = building_tec_old_machine_mega_capital 
				# Imperial Old machine
				has_building = building_tec_old_machine_imperial_capital
				# Machine fe
				has_building = @building_tec_machine_fe_capital
				has_building = @building_tec_machine_fe_major_capital

				# Production capitals
				has_building = @building_tec_machine_production_major_capital 
				has_building = @building_tec_machine_production_system_capital 
				has_building = @building_tec_machine_production_galactic_capital

				has_building = @building_tec_machine_extraction_major_capital 
				has_building = @building_tec_machine_extraction_system_capital 
				has_building = @building_tec_machine_extraction_galactic_capital

				# External
					# ACOT
					has_building = @building_dm_ancient_control_center	
					has_building = @building_ae_ancient_control_center	
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_control_center
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_control_center
					has_building = @building_phanon_control_center
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# galacot
					has_building = @building_dm_galactic_machine_capital
					has_building = @building_ae_galactic_machine_capital
					has_building = @building_stellarite_galactic_machine_capital
				# /
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_major_capital"
			OR = {
				has_building = building_major_capital 
				has_building = building_system_capital
				has_building = building_galactic_capital
				has_building = building_imperial_capital
				#  Stellaris evolved scifi
				has_building = building_tec_scifi_major_capital 
				has_building = building_tec_scifi_system_capital
				has_building = building_tec_scifi_galactic_capital
				has_building = building_tec_scifi_imperial_capital
				# Stellaris evolved exo
				has_building = @building_tec_exo_major_capital 
				has_building = @building_tec_exo_system_capital
				has_building = @building_tec_exo_galactic_capital
				has_building = @building_tec_exo_imperial_capital
				# Stelaris evolved biocapital
				has_building = @building_tec_bio_major_capital 
				has_building = @building_tec_bio_system_capital
				has_building = @building_tec_bio_galactic_capital
				has_building = @building_tec_bio_imperial_capital
				# Stelaris evolved Kohn
				has_building = @building_tec_kohn_major_capital 
				has_building = @building_tec_kohn_system_capital
				has_building = @building_tec_kohn_galactic_capital
				has_building = @building_tec_kohn_imperial_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_phanon_palace
					# Azur Lane Stellaris DLC
					has_building = @azur_building_mind_capital
					has_building = @azur_building_mind_net_capital
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Nirvana Empire Project
					has_building = @building_nirvana_empire_palace
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# galacot
					has_building = @building_dm_galactic_capital
					has_building = @building_ae_galactic_capital
					has_building = @building_stellarite_galactic_capital
					has_building = @building_dm_galactic_hive_capital
					has_building = @building_ae_galactic_hive_capital
					has_building = @building_stellarite_galactic_hive_capital
					has_building = @building_dm_galactic_machine_capital
					has_building = @building_ae_galactic_machine_capital
					has_building = @building_stellarite_galactic_machine_capital
					# All that is GRIMDARK
					has_building = @building_system_capital_gr
				# /
			}
		}
	}
}

has_fully_upgraded_capital = {
	if = {
		limit = {
			has_modifier = resort_colony
		}
		custom_tooltip = {
			fail_text = "requires_building_resort_major_capital"
			OR = {
				has_building = building_resort_major_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# Special Colonies Overhaul
					has_building = @building_SCO_resort_system_capital
				# /
			}
		}
	}
	else_if = {
		limit = {
			has_modifier = slave_colony
		}
		custom_tooltip = {
			fail_text = "requires_building_slave_major_capital"
			OR = {
				has_building = building_slave_major_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# Special Colonies Overhaul
					has_building = @building_SCO_slave_system_capital
				# /	
			}
		}
	}
	else_if = {
		limit = {
			# Stellaris Evolved triggers
			if = {
				limit = {
					has_Stellaris_evolved = yes
				}
				tec_is_habitat = yes
				tec_uses_regular_capital_override = no
			}
			# Others
			else = {
				OR = {
					is_planet_class = pc_habitat
					# Workaround for special habitats
					uses_district_set = habitat
					# Planetary Diversity
					uses_district_set = pdplanethab
				}
			}
			# ^ Note: This doesn't count worlds with district sets like pdarchive giga_habitat, which uses regular capitals
		}
		custom_tooltip = {
			fail_text = "requires_building_hab_major_capital"
			OR = {
				# Regular
				has_building = building_hab_major_capital
				has_building = building_hab_system_capital
				has_building = building_imperial_capital
				# Scifi
				
				has_building = building_tec_scifi_imperial_capital
				# Machine
				has_building = building_tec_hab_machine_major_capital
				has_building = building_tec_hab_machine_system_capital
				has_building = building_imperial_machine_capital
				has_building = building_tec_old_machine_imperial_capital
				# Hive
				has_building = building_tec_hab_hive_major_capital
				has_building = building_tec_hab_hive_system_capital
				has_building = building_imperial_hive_capital
				# Biohive
				has_building = building_tec_hab_biohive_major_capital
				has_building = building_tec_hab_biohive_system_capital
				has_building = building_tec_biohive_imperial_capital
				# Cyberhive
				has_building = building_tec_hab_cyberhive_major_capital
				has_building = building_tec_hab_cyberhive_system_capital
				has_building = building_tec_cyberhive_imperial_capital
				#External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_dm_ancient_hive_cluster
					has_building = @building_ae_ancient_hive_cluster
					has_building = @building_dm_ancient_control_center 
					has_building = @building_ae_ancient_control_center				
					has_building = @building_heaven_sanctuary
					has_building = @building_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_stellarite_control_center
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_palace
					has_building = @building_phanon_hive_cluster
					has_building = @building_phanon_control_center
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
				# /
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_major_hive_capital"
			OR = {
				has_building = building_hive_major_capital
				has_building = building_hive_system_capital
				has_building = building_hive_galactic_capital
				has_building = building_imperial_hive_capital

				# Stellaris Evolved Cyber 
				has_building = building_tec_cyberhive_major_capital
				has_building = building_tec_cyberhive_system_capital
				has_building = building_tec_cyberhive_galactic_capital
				has_building = building_tec_cyberhive_imperial_capital

				# Stellaris Evolved Bio
				has_building = building_tec_biohive_major_capital
				has_building = building_tec_biohive_system_capital
				has_building = building_tec_biohive_galactic_capital
				has_building = building_tec_biohive_imperial_capital

				# Hive fe
				has_building = @building_tec_hive_fe_capital
				has_building = @building_tec_hive_fe_major_capital
				has_building = @building_tec_cyberhive_fe_capital
				has_building = @building_tec_cyberhive_fe_major_capital
				has_building = @building_tec_biohive_fe_capital
				has_building = @building_tec_biohive_fe_major_capital

				# External
					# ACOT
					has_building = @building_dm_ancient_hive_cluster
					has_building = @building_ae_ancient_hive_cluster
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_hive_cluster
					has_building = @building_phanon_hive_cluster
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# galacot
					has_building = @building_dm_galactic_hive_capital
					has_building = @building_ae_galactic_hive_capital
					has_building = @building_stellarite_galactic_hive_capital
					# All that is GRIMDARK
					has_building = @building_hive_major_capital_sick
				# /
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_machine_major_capital"
			OR = {
				has_building = building_machine_major_capital 
				has_building = building_machine_system_capital 
				has_building = building_machine_galactic_capital
				# Imperial
				has_building = building_imperial_machine_capital

				# Stellaris evolved old
				has_building = building_tec_old_machine_major_capital 
				has_building = building_tec_old_machine_system_capital 
				has_building = building_tec_old_machine_mega_capital
				# Imperial
				has_building = building_tec_old_machine_imperial_capital
				# Machine fe
				has_building = @building_tec_machine_fe_capital
				has_building = @building_tec_machine_fe_major_capital

				# Production capitals
				has_building = @building_tec_machine_production_major_capital 
				has_building = @building_tec_machine_production_system_capital 
				has_building = @building_tec_machine_production_galactic_capital

				has_building = @building_tec_machine_extraction_major_capital 
				has_building = @building_tec_machine_extraction_system_capital 
				has_building = @building_tec_machine_extraction_galactic_capital
				
				# External
					# ACOT
					has_building = @building_dm_ancient_control_center 
					has_building = @building_ae_ancient_control_center
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_control_center
					has_building = @building_phanon_control_center
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# galacot
					has_building = @building_dm_galactic_machine_capital
					has_building = @building_ae_galactic_machine_capital
					has_building = @building_stellarite_galactic_machine_capital
				# /
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_major_capital"
			OR = {
				has_building = building_major_capital 
				has_building = building_system_capital
				has_building = building_galactic_capital
				has_building = building_imperial_capital
				# Stellaris evolved scifi
				has_building = building_tec_scifi_major_capital 
				has_building = building_tec_scifi_system_capital
				has_building = building_tec_scifi_galactic_capital
				has_building = building_tec_scifi_imperial_capital
				# Stellaris evolved exo
				has_building = @building_tec_exo_major_capital 
				has_building = @building_tec_exo_system_capital
				has_building = @building_tec_exo_galactic_capital
				has_building = @building_tec_exo_imperial_capital
				# Stelaris evolved biocapital
				has_building = @building_tec_bio_major_capital 
				has_building = @building_tec_bio_system_capital
				has_building = @building_tec_bio_galactic_capital
				has_building = @building_tec_bio_imperial_capital
				# Stelaris evolved Kohn
				has_building = @building_tec_kohn_major_capital 
				has_building = @building_tec_kohn_system_capital
				has_building = @building_tec_kohn_galactic_capital
				has_building = @building_tec_kohn_imperial_capital
				# External
					# ACOT
					has_building = @building_dm_ancient_palace
					has_building = @building_ae_ancient_palace
					has_building = @building_phanon_tower
					# AOT
					has_building = @building_stellarite_palace
					has_building = @building_phanon_palace
					# Azur Lane Stellaris DLC
					has_building = @azur_building_mind_capital
					has_building = @azur_building_mind_net_capital	
					# Star Wars: Kuat Ancient Empire
					has_building = @building_kuat_command_center
					# Nirvana Empire Project
					has_building = @building_nirvana_empire_palace
					# Twinks Atlantean
					has_building = @building_ancient_palace_at
					# Twinks Kaldorei
					has_building = @building_nightelf_palace
					# galacot
					has_building = @building_dm_galactic_capital
					has_building = @building_ae_galactic_capital
					has_building = @building_stellarite_galactic_capital
					has_building = @building_dm_galactic_hive_capital
					has_building = @building_ae_galactic_hive_capital
					has_building = @building_stellarite_galactic_hive_capital
					has_building = @building_dm_galactic_machine_capital
					has_building = @building_ae_galactic_machine_capital
					has_building = @building_stellarite_galactic_machine_capital
					# All that is GRIMDARK
					has_building = @building_system_capital_gr
				# /
			}
		}
	}
}


# ACOT
has_enigmatic_capital = {
	if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_fe_capital_hive"
			OR = {
				has_building = building_imperial_hive_capital

				has_building = building_dm_ancient_hive_cluster
				has_building = building_ae_ancient_hive_cluster
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_hive_cluster
				has_building = building_phanon_hive_cluster
				# galacot
				has_building = building_dm_galactic_hive_capital
                has_building = building_ae_galactic_hive_capital
				has_building = building_stellarite_galactic_hive_capital
				# Stellaris evolved
				has_building = building_tec_cyberhive_imperial_capital
				has_building = building_tec_biohive_imperial_capital
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_fe_capital_machine"
			OR = {
				has_building = building_imperial_machine_capital
				has_building = building_dm_ancient_control_center 
				has_building = building_ae_ancient_control_center
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_control_center
				has_building = building_phanon_control_center
				# galacot
				has_building = building_dm_galactic_machine_capital
                has_building = building_ae_galactic_machine_capital
				has_building = building_stellarite_galactic_machine_capital
				# Stellaris Evolved
				has_building = building_tec_old_machine_imperial_capital
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_fe_capital"
			OR = {
				has_building = building_imperial_capital
				has_building = building_dm_ancient_palace
				has_building = building_ae_ancient_palace
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_palace
				has_building = building_phanon_palace
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# galacot
				has_building = building_dm_galactic_capital
                has_building = building_ae_galactic_capital
				has_building = building_stellarite_galactic_capital
				has_building = building_dm_galactic_hive_capital
                has_building = building_ae_galactic_hive_capital
				has_building = building_stellarite_galactic_hive_capital
				has_building = building_dm_galactic_machine_capital
                has_building = building_ae_galactic_machine_capital
				has_building = building_stellarite_galactic_machine_capital
				# Stellaris evolved
				has_building = building_tec_scifi_imperial_capital
				has_building = @building_tec_exo_imperial_capital
				has_building = @building_tec_bio_imperial_capital
				has_building = @building_tec_kohn_imperial_capital
			}
		}
	}	
}


has_ascended_capital = {
	if = {
		limit = { owner = { is_hive_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_fe_capital_hive"
			OR = {
				has_building = building_imperial_hive_capital
				has_building = building_ae_ancient_hive_cluster
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_hive_cluster
				has_building = building_phanon_hive_cluster
				# galacot
                has_building = building_ae_galactic_hive_capital
				has_building = building_stellarite_galactic_hive_capital
				# Stellaris evolved
				has_building = building_tec_biohive_imperial_capital
				has_building = building_tec_cyberhive_imperial_capital
			}
		}
	}
	else_if = {
		limit = { owner = { is_machine_empire = yes } }
		custom_tooltip = {
			fail_text = "requires_building_fe_capital_machine"
			OR = {
				has_building = building_imperial_machine_capital
				has_building = building_ae_ancient_control_center
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_control_center
				has_building = building_phanon_control_center
				# galacot
                has_building = building_ae_galactic_machine_capital
				has_building = building_stellarite_galactic_machine_capital
				# Stellaris Evolved
				has_building = building_tec_old_machine_imperial_capital
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_fe_capital"
			OR = {
				has_building = building_imperial_capital
				has_building = building_ae_ancient_palace
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_palace
				has_building = building_phanon_palace
				# Twinks Atlantean
				has_building = building_ancient_palace_at
				# Twinks Kaldorei
				has_building = building_nightelf_palace
				# galacot
                has_building = building_ae_galactic_capital
				has_building = building_stellarite_galactic_capital
                has_building = building_ae_galactic_hive_capital
				has_building = building_stellarite_galactic_hive_capital
                has_building = building_ae_galactic_machine_capital
				has_building = building_stellarite_galactic_machine_capital
				# Stellaris evolved
				has_building = building_tec_scifi_imperial_capital
				has_building = @building_tec_exo_imperial_capital
				has_building = @building_tec_bio_imperial_capital
				has_building = @building_tec_kohn_imperial_capital
			}
		}
	}	
}


# AOT/Twinks/galacot, minus the abandoned Eternals
has_stellarite_capital = {
	if = {
		limit = {
			owner = {
				is_hive_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_stellarite_capital_hive"
			OR = {
				# ACOT
				has_building = building_imperial_hive_capital
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_hive_cluster
				has_building = building_phanon_hive_cluster
				# GALACOT
				has_building = building_stellarite_galactic_hive_capital
				# Stellaris evolved
				has_building = building_tec_biohive_imperial_capital
				has_building = building_tec_cyberhive_imperial_capital
			}
		}
	}
	else_if = {
		limit = {
			owner = {
				is_machine_empire = yes
			}
		}
		custom_tooltip = {
			fail_text = "requires_building_stellarite_capital_machine"
			OR = {
				# ACOT
				has_building = building_imperial_machine_capital
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_control_center
				has_building = building_phanon_control_center
				# GALACOT
				has_building = building_stellarite_galactic_machine_capital
				# Stellaris Evolved
				has_building = building_tec_old_machine_imperial_capital
			}
		}
	}
	else = {
		custom_tooltip = {
			fail_text = "requires_building_stellarite_capital"
			OR = {
				# ACOT
				has_building = building_imperial_capital
				has_building = building_phanon_tower
				# AOT
				has_building = building_stellarite_palace
				has_building = building_phanon_palace
				# GALACOT
				has_building = building_stellarite_galactic_capital
				has_building = building_stellarite_galactic_hive_capital
				has_building = building_stellarite_galactic_machine_capital
				# Stellaris evolved
				has_building = building_tec_scifi_imperial_capital
				has_building = @building_tec_exo_imperial_capital
				has_building = @building_tec_bio_imperial_capital
				has_building = @building_tec_kohn_imperial_capital
			}
		}
	}
}

# ACOT/AOT/Twinks mods merging.
has_advanced_fort = {
	OR = {
		# ACOT
		has_building = building_dm_stronghold
		has_building = building_fe_stronghold
		has_building = building_ae_stronghold
		has_building = building_giga_fortress
		has_building = building_giga_fortress_array
		has_building = building_giga_fortress_lab
		has_building = building_giga_fortress_obelisk
		has_building = building_giga_fortress_fe
		has_district = district_acot_enigmapolis_fortress
		# AOT
		has_building = building_stellarite_stronghold
		has_building = building_phanon_stronghold
		# Twinks Mods
		has_building = building_precinct_house_at_b
		has_building = building_tw_arcane_hold
		# has_building = building_demon_fortress
		# Stellaris evolved
		has_building = building_bastion
		has_building = building_tec_dread_bastion
		has_district = district_tec_arcology_army
		has_district = district_tec_arcology_navy
		has_district = district_tec_elysium_naval
		has_district = district_tec_elysium_shipyard
		has_district = district_tec_rw_naval
	}
}
